
{
  "AWSTemplateFormatVersion": "2010-09-09",
  "Description": "S3 Permissions required by IaC agents: S3IaCAgent.",
  "Resources": {
    "S3IaCAgentPolicy": {
      "Type": "AWS::IAM::ManagedPolicy",
      "Properties": {
        "Description": "S3 Permissions required by IaC agents: S3IaCAgent.",
        "ManagedPolicyName": "S3IaCAgent",
        "PolicyDocument": {
            "Version": "2012-10-17",
            "Statement": [
                {
                    "Effect": "Allow",
                    "Action": [
                        "s3:PutObject",
                        "s3:GetObject",
                        "s3:ObjectOwnerOverrideToBucketOwner",
                        "s3:ListAllMyBuckets",
                        "s3:PutBucketPolicy",
                        "s3:CreateBucket",
                        "s3:ListBucket",
                        "s3:DeleteObject",
                        "s3:DeleteBucketPolicy",
                        "s3:DeleteBucket",
                        "s3:GetBucketPolicy",
                        "s3:GetObjectVersion"
                    ],
                    "Resource": "*"
                }
            ]
        }
      }
    }
  },
  "Outputs": {
    "S3IaCAgentPolicyValue": {
      "Description": "S3 Managed Policy created.",
      "Value": {
        "Ref": "S3IaCAgentPolicy"
      }
    }
  }
}
