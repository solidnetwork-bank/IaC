
{
  "AWSTemplateFormatVersion": "2010-09-09",
  "Description": "S3 Permissions required by IaC agents: S3IaCAgent.",
  "Resources": {
    "S3IaCAgentPolicy": {
      "Type": "AWS::IAM::ManagedPolicy",
      "Properties": {
        "Description": "S3 Permissions required by IaC agents: S3IaCAgent.",
        "ManagedPolicyName": "S3IaCAgent",
        "PolicyDocument": {
            "Version": "2012-10-17",
            "Statement": [
                {
                    "Effect": "Allow",
                    "Action": [
                        "GetReplicationConfiguration",
                        "GetMetricsConfiguration",
                        "GetLifecycleConfiguration",
                        "GetInventoryConfiguration",
                        "GetIntelligentTieringConfiguration",
                        "GetEncryptionConfiguration",
                        "GetBucketWebsite",
                        "GetBucketVersioning",
                        "GetBucketPublicAccessBlock",
                        "GetBucketOwnershipControls",
                        "GetBucketObjectLockConfiguration",
                        "GetBucketNotification",
                        "GetBucketLogging",
                        "GetBucketCORS",
                        "GetAnalyticsConfiguration",
                        "GetAccelerateConfiguration",
                        "PutBucketPolicy",
                        "GetBucketPolicy",
                        "PutBucketWebsite",
                        "PutBucketPublicAccessBlock",
                        "CreateBucket",
                        "DeleteBucket"                        
                    ],
                    "Resource": "*"
                }
            ]
        }
      }
    }
  },
  "Outputs": {
    "S3IaCAgentPolicyValue": {
      "Description": "S3 Managed Policy created.",
      "Value": {
        "Ref": "S3IaCAgentPolicy"
      }
    }
  }
}
